@model List<VanLocWeb.Models.ContactMessage>
@{
    ViewData["Title"] = "Tin nhắn liên hệ";
    Layout = "_AdminLayout";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">Hộp thư liên hệ</h2>
    <span class="badge bg-primary rounded-pill px-3">@Model.Count(m => !m.IsRead) tin nhắn mới</span>
</div>

<div class="card border-0 shadow-sm rounded-4 overflow-hidden">
    <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
            <thead class="bg-light">
                <tr class="small text-muted text-uppercase tracking-widest">
                    <th class="ps-4">Người gửi</th>
                    <th>Chủ đề</th>
                    <th>Nội dung</th>
                    <th>Ngày gửi</th>
                    <th class="text-end pe-4">Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @if (!Model.Any())
                {
                    <tr>
                        <td colspan="5" class="text-center py-5 text-muted italic">Chưa có tin nhắn nào.</td>
                    </tr>
                }
                @foreach (var m in Model.OrderByDescending(x => x.SentDate))
                {
                    <tr class="@(!m.IsRead ? "bg-light border-start border-primary border-4" : "")">
                        <td class="ps-4">
                            <div class="fw-bold text-charcoal">@m.FullName</div>
                            <div class="small text-muted">@m.Phone</div>
                            <div class="extra-small text-muted">@m.Email</div>
                        </td>
                        <td>
                            <span
                                class="badge bg-@(m.Subject?.Contains("Gia nhập") == true ? "info" : "secondary") text-white">@m.Subject</span>
                        </td>
                        <td class="small" style="max-width: 300px;">
                            <div class="text-truncate">@m.Content</div>
                        </td>
                        <td class="small">@m.SentDate.ToString("dd/MM/yyyy HH:mm")</td>
                        <td class="text-end pe-4">
                            <button class="btn btn-sm btn-outline-primary rounded-pill px-3"
                                onclick="alert('@m.Content')">Xem</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<style>
    .extra-small {
        font-size: 0.75rem;
    }

    .text-charcoal {
        color: #232d4b;
    }
</style>
